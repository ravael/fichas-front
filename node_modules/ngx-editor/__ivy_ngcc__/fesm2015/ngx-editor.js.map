{"version":3,"file":"ngx-editor.js","sources":["../../../src/lib/parsers.ts","../../../src/lib/editor.component.ts","../../../src/lib/modules/menu/menu.service.ts","../../../src/lib/modules/menu/menu.component.ts","../../../src/lib/Locals.ts","../../../src/lib/editor.service.ts","../../../src/lib/icons/bold.ts","../../../src/lib/icons/italic.ts","../../../src/lib/icons/code.ts","../../../src/lib/icons/underline.ts","../../../src/lib/icons/strike.ts","../../../src/lib/icons/ordered_list.ts","../../../src/lib/icons/bullet_list.ts","../../../src/lib/icons/quote.ts","../../../src/lib/icons/link.ts","../../../src/lib/icons/unlink.ts","../../../src/lib/icons/image.ts","../../../src/lib/icons/align_left.ts","../../../src/lib/icons/align_center.ts","../../../src/lib/icons/align_right.ts","../../../src/lib/icons/align_justify.ts","../../../src/lib/icons/text_color.ts","../../../src/lib/icons/color_fill.ts","../../../src/lib/icons/index.ts","../../../src/lib/commands/Mark.ts","../../../src/lib/commands/Blockquote.ts","../../../src/lib/commands/ListItem.ts","../../../src/lib/commands/Heading.ts","../../../src/lib/commands/TextAlign.ts","../../../src/lib/commands/Link.ts","../../../src/lib/commands/Image.ts","../../../src/lib/commands/TextColor.ts","../../../src/lib/commands/index.ts","../../../src/lib/modules/menu/MenuCommands.ts","../../../src/lib/modules/menu/toggle-command/toggle-command.component.ts","../../../src/lib/modules/menu/link/link.component.ts","../../../src/lib/modules/menu/dropdown/dropdown.component.ts","../../../src/lib/modules/menu/image/image.component.ts","../../../src/lib/modules/menu/color-picker/color-picker.component.ts","../../../src/lib/pipes/sanitize/sanitize-html.pipe.ts","../../../src/lib/modules/menu/menu.module.ts","../../../src/lib/components/bubble/bubble.component.ts","../../../src/lib/editor.module.ts","../../../src/lib/validators.ts","../../../src/lib/EditorCommands.ts","../../../src/lib/defaultPlugins.ts","../../../src/lib/Editor.ts","../../../src/ngx-editor.ts"],"names":["schema","defaultSchema","Blockquote","Commands.STRONG","Commands.EM","Commands.CODE","Commands.UNDERLINE","Commands.STRIKE","Commands.BLOCKQUOTE","Commands.UL","Commands.OL","Commands.H1","Commands.H2","Commands.H3","Commands.H4","Commands.H5","Commands.H6","Commands.ALIGN_LEFT","Commands.ALIGN_CENTER","Commands.ALIGN_RIGHT","Commands.ALIGN_JUSTIFY","Link","Commands.LINK","Image","Commands.IMAGE","TextColor","Commands.TEXT_COLOR","Commands.TEXT_BACKGROUND_COLOR","Validators","LinkCommand","ImageCommand","MarkCommand","ListCommand","HeadingCommand","TextColorCommand","TextAlignCommand","defautlSchema","editable","placeholder","editablePlugin","placeholderPlugin"],"mappings":"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","sourcesContent":["import { DOMSerializer, Schema, DOMParser, Node as ProsemirrorNode } from 'prosemirror-model';\n\nimport defaultSchema from './schema';\n\nexport const emptyDoc = {\n  type: 'doc',\n  content: [\n    {\n      type: 'paragraph',\n    }\n  ],\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\nexport const toHTML = (json: Record<string, any>, inputSchema?: Schema): string => {\n  const schema = inputSchema ?? defaultSchema;\n\n  const contentNode = schema.nodeFromJSON(json);\n  const html = DOMSerializer.fromSchema(schema).serializeFragment(contentNode.content);\n\n  const div = document.createElement('div');\n  div.appendChild(html);\n  return div.innerHTML;\n};\n\nexport const toDoc = (html: string, inputSchema?: Schema): Record<string, any> => {\n  const schema = inputSchema ?? defaultSchema;\n\n  const el = document.createElement('div');\n  el.innerHTML = html;\n\n  return DOMParser.fromSchema(schema).parse(el).toJSON();\n};\n\nexport const parseContent = (value: string | Record<string, any> | null, schema: Schema): ProsemirrorNode => {\n  if (!value) {\n    return schema.nodeFromJSON(emptyDoc);\n  }\n\n  if (typeof value !== 'string') {\n    return schema.nodeFromJSON(value);\n  }\n\n  const docJson = toDoc(value, schema);\n  return schema.nodeFromJSON(docJson);\n};\n","import {\n  Component, ViewChild, ElementRef,\n  forwardRef, OnDestroy, ViewEncapsulation,\n  OnInit, Output, EventEmitter,\n  Input, Renderer2, SimpleChanges, OnChanges,\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { Subscription } from 'rxjs';\n\nimport { toHTML } from './parsers';\nimport Editor from './Editor';\n\n@Component({\n  selector: 'ngx-editor',\n  templateUrl: './editor.component.html',\n  styleUrls: ['./editor.component.scss'],\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => NgxEditorComponent),\n    multi: true\n  }],\n  encapsulation: ViewEncapsulation.None\n})\n\nexport class NgxEditorComponent implements ControlValueAccessor, OnInit, OnChanges, OnDestroy {\n  constructor(private renderer: Renderer2) { }\n\n  @ViewChild('ngxEditor', { static: true }) ngxEditor: ElementRef;\n\n  @Input() editor: Editor;\n  @Input() outputFormat: 'doc' | 'html';\n  @Input() placeholder = 'Type Here...';\n  @Input() enabled = true;\n\n  @Output() focusOut = new EventEmitter<void>();\n  @Output() focusIn = new EventEmitter<void>();\n\n  private subscriptions: Subscription[] = [];\n  private onChange: (value: Record<string, any> | string) => void = () => { };\n  private onTouched: () => void = () => { };\n\n  writeValue(value: Record<string, any> | string | null): void {\n    if (!this.outputFormat && typeof value === 'string') {\n      this.outputFormat = 'html';\n    }\n\n    this.editor.setContent(value);\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  private handleChange(jsonDoc: Record<string, any>): void {\n    if (this.outputFormat === 'html') {\n      const html = toHTML(jsonDoc, this.editor.schema);\n      this.onChange(html);\n      return;\n    }\n\n    this.onChange(jsonDoc);\n  }\n\n  ngOnInit(): void {\n    if (!this.editor) {\n      throw new Error('NgxEditor: Required editor instance');\n    }\n\n    if (this.enabled) {\n      this.editor.enable();\n    } else {\n      this.editor.disable();\n    }\n\n    this.editor.setPlaceholder(this.placeholder);\n\n    this.renderer.appendChild(this.ngxEditor.nativeElement, this.editor.el);\n\n    const contentChangeSubscription = this.editor.onContentChange.subscribe(jsonDoc => {\n      this.handleChange(jsonDoc);\n    });\n\n    const blurSubscription = this.editor.onBlur.subscribe(() => {\n      this.focusOut.emit();\n      this.onTouched();\n    });\n\n    const focusScbscription = this.editor.onFocus.subscribe(() => {\n      this.focusIn.emit();\n    });\n\n    this.subscriptions.push(\n      contentChangeSubscription,\n      blurSubscription,\n      focusScbscription\n    );\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes?.placeholder && !changes.placeholder.isFirstChange()) {\n      this.editor.setPlaceholder(changes.placeholder.currentValue);\n    }\n\n    if (changes?.editable && !changes.editable.isFirstChange()) {\n      if (!changes.editable.currentValue) {\n        this.editor.disable();\n      } else {\n        this.editor.enable();\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.forEach(subscription => {\n      subscription.unsubscribe();\n    });\n\n    this.editor.destroy();\n  }\n}\n","import { Injectable, TemplateRef } from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MenuService {\n  #view: EditorView;\n  customMenuRefChange: Subject<TemplateRef<any>> = new Subject<TemplateRef<any>>();\n\n  plugin = {\n    update: new Subject<EditorView>(),\n    destroy: new Subject<void>()\n  };\n\n  constructor() { }\n\n  set view(v: EditorView) {\n    this.#view = v;\n  }\n\n  get view(): EditorView {\n    return this.#view;\n  }\n\n  setCustomMenuRef(c: TemplateRef<any>): void {\n    this.customMenuRefChange.next(c);\n  }\n}\n","import {\n  Component, Input, OnDestroy,\n  OnInit, TemplateRef, ViewEncapsulation\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { Toolbar, ToolbarItem, ToolbarDropdown } from '../../types';\n\nimport { MenuService } from './menu.service';\nimport Editor from '../../Editor';\n\nconst DEFAULT_TOOLBAR: Toolbar = [\n  ['bold', 'italic'],\n  ['code', 'blockquote'],\n  ['underline', 'strike'],\n  ['ordered_list', 'bullet_list'],\n  [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n  ['link', 'image'],\n  ['text_color', 'background_color'],\n  ['align_left', 'align_center', 'align_right', 'align_justify'],\n];\n\nconst DEFAULT_COLOR_PRESETS = [\n  '#b60205',\n  '#d93f0b',\n  '#fbca04',\n  '#0e8a16',\n  '#006b75',\n  '#1d76db',\n  '#0052cc',\n  '#5319e7',\n  '#e99695',\n  '#f9d0c4',\n  '#fef2c0',\n  '#c2e0c6',\n  '#bfdadc',\n  '#c5def5',\n  '#bfd4f2',\n  '#d4c5f9'\n];\n\n@Component({\n  selector: 'ngx-editor-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\n\nexport class MenuComponent implements OnInit, OnDestroy {\n  @Input() toolbar: Toolbar = DEFAULT_TOOLBAR;\n  @Input() colorPresets: string[] = DEFAULT_COLOR_PRESETS;\n  @Input() disabled = false;\n  @Input() editor: Editor;\n  @Input() customMenuRef: TemplateRef<any> | null = null;\n\n  private updateSubscription: Subscription;\n\n  toggleCommands: any[] = [\n    'bold', 'italic',\n    'underline', 'strike',\n    'code', 'blockquote',\n    'ordered_list', 'bullet_list',\n    'align_left', 'align_center', 'align_right', 'align_justify'\n  ];\n\n  iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--Icon'];\n  dropdownContainerClass = ['NgxEditor__Dropdown'];\n  seperatorClass = ['NgxEditor__Seperator'];\n\n  constructor(private menuService: MenuService) { }\n\n  get presets(): string[][] {\n    const col = 8;\n    const colors: string[][] = [];\n\n    this.colorPresets.forEach((color, index) => {\n      const row = Math.floor(index / col);\n\n      if (!colors[row]) {\n        colors.push([]);\n      }\n\n      colors[row].push(color);\n    });\n\n    return colors;\n  }\n\n  isDropDown(item: ToolbarItem): boolean {\n    if ((item as ToolbarDropdown)?.heading) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getDropdownItems(item: ToolbarItem): ToolbarDropdown {\n    return item as ToolbarDropdown;\n  }\n\n  ngOnInit(): void {\n    if (!this.editor) {\n      throw new Error('NgxEditor: Required editor instance');\n    }\n\n    this.menuService.view = this.editor.view;\n\n    this.updateSubscription = this.editor.onUpdate.subscribe(() => {\n      this.menuService.plugin.update.next(this.editor.view);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n  }\n}\n","const defaults: Record<string, string> = {\n  // menu\n  bold: 'Bold',\n  italic: 'Italic',\n  code: 'Code',\n  underline: 'Underline',\n  strike: 'Strike',\n  blockquote: 'Blockquote',\n  bullet_list: 'Bullet List',\n  ordered_list: 'Ordered List',\n  heading: 'Heading',\n  h1: 'Header 1',\n  h2: 'Header 2',\n  h3: 'Header 3',\n  h4: 'Header 4',\n  h5: 'Header 5',\n  h6: 'Header 6',\n  align_left: 'Left Align',\n  align_center: 'Center Align',\n  align_right: 'Right Align',\n  align_justify: 'Justify',\n  text_color: 'Text Color',\n  background_color: 'Background Color',\n\n  // pupups, forms, others...\n  url: 'URL',\n  text: 'Text',\n  openInNewTab: 'Open in new tab',\n  insert: 'Insert',\n  altText: 'Alt Text',\n  title: 'Title',\n  remove: 'Remove',\n};\n\nexport type LocalsKeys = keyof typeof defaults;\n\nclass Locals {\n  locals = defaults;\n\n  constructor(newLocals: Partial<Record<LocalsKeys, string>> = {}) {\n    this.locals = Object.assign({}, defaults, newLocals);\n  }\n\n  get = (key: string) => {\n    return this.locals[key] ?? '';\n  }\n}\n\nexport default Locals;\n","import { Injectable, Optional } from '@angular/core';\n\nimport { NgxEditorConfig} from './types';\nimport Locals from './Locals';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxEditorServiceConfig {\n  public locals = {};\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxEditorService {\n  config: NgxEditorServiceConfig;\n\n  constructor(@Optional() config?: NgxEditorServiceConfig) {\n    this.config = config;\n  }\n\n  get locals(): Locals {\n    return new Locals(this.config.locals);\n  }\n}\n\nexport const provideMyServiceOptions = (config?: NgxEditorConfig): NgxEditorServiceConfig => {\n  return {\n    locals: config.locals ?? {}\n  };\n};\n","/* tslint:disable */\n\nexport default `\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n  <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n`;\n","export default `\n  <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n`;\n","export default `\n<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n<path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n<path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n`;\n","export default `\n<path d=\"M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z\"/>\n`;\n","export default `\n<path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"/>\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n<path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n<path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"/>\n<path d=\"M0 24V0\" fill=\"none\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n<path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n<path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n<path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n<path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n`;\n","export default `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n<path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\"/>\n`;\n","export default `\n<path d=\"M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z\"/>\n`;\n","export default `\n<path d=\"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z\"/>\n`;\n","// Icons source: https://material.io/\n\nimport bold from './bold';\nimport italic from './italic';\nimport code from './code';\nimport underline from './underline';\nimport strike from './strike';\nimport orderedList from './ordered_list';\nimport bulletList from './bullet_list';\nimport quote from './quote';\nimport link from './link';\nimport unlink from './unlink';\nimport image from './image';\nimport alignLeft from './align_left';\nimport alignCenter from './align_center';\nimport alignRight from './align_right';\nimport alignJustify from './align_justify';\nimport textColor from './text_color';\nimport colorFill from './color_fill';\n\nconst DEFAULT_ICON_HEIGHT = 20;\nconst DEFAULT_ICON_WIDTH = 20;\n\nconst icons: Record<string, any> = {\n  bold,\n  italic,\n  code,\n  underline,\n  strike,\n  ordered_list: orderedList,\n  bullet_list: bulletList,\n  blockquote: quote,\n  link,\n  unlink,\n  image,\n  align_left: alignLeft,\n  align_center: alignCenter,\n  align_right: alignRight,\n  align_justify: alignJustify,\n  text_color: textColor,\n  color_fill: colorFill\n};\n\nclass Icon {\n  static get(name: string): string {\n    const path = icons[name] || '<path></path>';\n    return `\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=\"black\"\n        height=${DEFAULT_ICON_HEIGHT}\n        width=${DEFAULT_ICON_WIDTH}\n      >\n        ${path}\n      </svg>\n    `;\n  }\n\n}\n\nexport default Icon;\n","import { MarkType } from 'prosemirror-model';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { Command, toggleMark } from 'prosemirror-commands';\n\nimport { applyMark } from 'ngx-editor/commands';\nimport { isMarkActive } from 'ngx-editor/helpers';\n\nclass Mark {\n  name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n\n  apply(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema } = state;\n\n      const type: MarkType = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n\n      return applyMark(type)(state, dispatch);\n    };\n  }\n\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema } = state;\n\n      const type: MarkType = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n\n      return toggleMark(type)(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n\n    const type: MarkType = schema.marks[this.name];\n\n    if (!type) {\n      return false;\n    }\n\n    return isMarkActive(state, type);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default Mark;\n","import { NodeType } from 'prosemirror-model';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { Command, lift, wrapIn } from 'prosemirror-commands';\n\nimport { isNodeActive } from 'ngx-editor/helpers';\n\nclass Blockqote {\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n      const { schema } = state;\n\n      const type: NodeType = schema.nodes.blockquote;\n      if (!type) {\n        return false;\n      }\n\n      if (this.isActive(state)) {\n        return lift(state, dispatch);\n      }\n\n      return wrapIn(type)(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n\n    const type: NodeType = schema.nodes.blockquote;\n    if (!type) {\n      return false;\n    }\n\n    return isNodeActive(state, type);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default Blockqote;\n","import { NodeType, Schema } from 'prosemirror-model';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { liftListItem, wrapInList } from 'prosemirror-schema-list';\nimport { Command } from 'prosemirror-commands';\n\nimport { isNodeActive } from 'ngx-editor/helpers';\n\nclass ListItem {\n  isBulletList = false;\n\n  constructor(isBulletList = false) {\n    this.isBulletList = isBulletList;\n  }\n\n  getType(schema: Schema): NodeType {\n    return this.isBulletList ? schema.nodes.bullet_list : schema.nodes.ordered_list;\n  }\n\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema } = state;\n\n      const type = this.getType(schema);\n      if (!type) {\n        return false;\n      }\n\n      if (this.isActive(state)) {\n        return liftListItem(schema.nodes.list_item)(state, dispatch);\n      }\n\n      return wrapInList(type)(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n\n    const type = this.getType(schema);\n    if (!type) {\n      return false;\n    }\n\n    return isNodeActive(state, type);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default ListItem;\n","import { NodeType, Node as ProsemirrorNode } from 'prosemirror-model';\nimport { EditorState, Transaction } from 'prosemirror-state';\nimport { Command, setBlockType } from 'prosemirror-commands';\n\nimport { getSelectionNodes } from 'ngx-editor/helpers';\n\nexport type HeadingLevels = 1 | 2 | 3 | 4 | 5 | 6;\n\nclass Heading {\n  level: number;\n\n  constructor(level: HeadingLevels) {\n    this.level = level;\n  }\n\n  apply(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema } = state;\n\n      const type: NodeType = schema.nodes.heading;\n      if (!type) {\n        return false;\n      }\n\n      return setBlockType(type)(state, dispatch);\n    };\n  }\n\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { schema, selection, doc } = state;\n\n      const type: NodeType = schema.nodes.heading;\n      if (!type) {\n        return false;\n      }\n\n      const nodePos = selection.$from.before(1);\n      const node = doc.nodeAt(nodePos);\n\n      const attrs = node?.attrs ?? {};\n\n      if (this.isActive(state)) {\n        return setBlockType(schema.nodes.paragraph, attrs)(state, dispatch);\n      }\n\n      return setBlockType(type, { ...attrs, level: this.level })(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n    const nodesInSelection = getSelectionNodes(state);\n\n    const type: NodeType = schema.nodes.heading;\n    if (!type) {\n      return false;\n    }\n\n    const supportedNodes = [\n      type,\n      schema.nodes.text,\n      schema.nodes.blockquote\n    ];\n\n    // heading is a text node\n    // don't mark as active when it has more nodes\n    const nodes = nodesInSelection.filter(node => {\n      return supportedNodes.includes(node.type);\n    });\n\n    const acitveNode = nodes.find((node: ProsemirrorNode) => {\n      return node.attrs.level === this.level;\n    });\n\n    return Boolean(acitveNode);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default Heading;\n","import { EditorState, Transaction } from 'prosemirror-state';\nimport { Node } from 'prosemirror-model';\nimport { Command } from 'prosemirror-commands';\n\nimport { getSelectionNodes } from 'ngx-editor/helpers';\n\nexport type Align = 'left' | 'center' | 'right' | 'justify';\n\nclass TextAlign {\n  align: string;\n\n  constructor(align: Align) {\n    this.align = align;\n  }\n\n  toggle(): Command {\n    return (state: EditorState, dispatch?: (tr: Transaction) => void): boolean => {\n\n      const { doc, selection, tr, schema } = state;\n      const { from, to } = selection;\n\n      let applicable = false;\n\n      doc.nodesBetween(from, to, (node, pos) => {\n        const nodeType = node.type;\n        if ([schema.nodes.paragraph, schema.nodes.heading].includes(nodeType)) {\n          applicable = true;\n          tr.setNodeMarkup(pos, nodeType, { ...node.attrs, align: this.align });\n        }\n        return true;\n      });\n\n      if (!applicable) {\n        return false;\n      }\n\n      if (tr.docChanged) {\n        dispatch?.(tr);\n      }\n\n      return true;\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const nodes = getSelectionNodes(state);\n\n    const active = nodes.find((node: Node) => {\n      return node.attrs.align === this.align;\n    });\n\n    return Boolean(active);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.toggle()(state);\n  }\n}\n\nexport default TextAlign;\n","import { MarkType } from 'prosemirror-model';\nimport { EditorState } from 'prosemirror-state';\nimport { Command, toggleMark } from 'prosemirror-commands';\n\nimport { isMarkActive } from 'ngx-editor/helpers';\nimport { removeLink } from 'ngx-editor/commands';\nimport { Dispatch } from './types';\n\nconst defaultOptions = {\n  strict: true\n};\n\nexport interface LinkAttrs {\n  href: string;\n  title?: string;\n  target?: string;\n}\n\nclass Link {\n  update(attrs = {}): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema, selection } = state;\n\n      const type: MarkType = schema.marks.link;\n      if (!type) {\n        return false;\n      }\n\n      if (selection.empty) {\n        return false;\n      }\n\n      return toggleMark(type, attrs)(state, dispatch);\n    };\n  }\n\n  insert(text: string, attrs: LinkAttrs): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema, tr } = state;\n\n      const type: MarkType = schema.marks.link;\n      if (!type) {\n        return false;\n      }\n\n      const linkAttrs: LinkAttrs = {\n        href: attrs.href,\n        title: attrs.title ?? text,\n        target: attrs.target ?? '_blank'\n      };\n\n      const node = schema.text(text, [schema.marks.link.create(linkAttrs)]);\n\n      tr.replaceSelectionWith(node, false)\n        .scrollIntoView();\n\n      if (tr.docChanged) {\n        dispatch?.(tr);\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  isActive(state: EditorState, options = defaultOptions): boolean {\n    if (options.strict) {\n      return true;\n    }\n\n    const { schema } = state;\n    return isMarkActive(state, schema.marks.link);\n  }\n\n  remove(state: EditorState, dispatch?: Dispatch): boolean {\n    return removeLink()(state, dispatch);\n  }\n\n  canExecute(state: EditorState): boolean {\n    return this.update({})(state);\n  }\n}\n\nexport default Link;\n","import { EditorState, NodeSelection } from 'prosemirror-state';\nimport { Command } from 'prosemirror-commands';\n\nimport { Dispatch } from './types';\n\nexport interface ImageAttrs {\n  alt?: string;\n  title?: string;\n  width?: string;\n}\n\nclass Image {\n  insert(src: string, attrs: ImageAttrs): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema, tr, selection } = state;\n\n      const type = schema.nodes.image;\n      if (!type) {\n        return false;\n      }\n\n      const imageAttrs = {\n        width: null,\n        src,\n        ...attrs\n      };\n\n      if (!imageAttrs.width && selection instanceof NodeSelection && selection.node.type === type) {\n        imageAttrs.width = selection.node.attrs.width;\n      }\n\n      tr.replaceSelectionWith(type.createAndFill(imageAttrs));\n\n      const resolvedPos = tr.doc.resolve(\n        tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize\n      );\n\n      tr\n        .setSelection(new NodeSelection(resolvedPos))\n        .scrollIntoView();\n\n      if (tr.docChanged) {\n        dispatch?.(tr);\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { selection } = state;\n    if (selection instanceof NodeSelection) {\n      return selection.node.type.name === 'image';\n    }\n\n    return false;\n  }\n}\n\nexport default Image;\n","import { MarkType } from 'prosemirror-model';\nimport { EditorState } from 'prosemirror-state';\nimport { Command } from 'prosemirror-commands';\n\nimport { getSelectionMarks, isMarkActive } from 'ngx-editor/helpers';\nimport { applyMark, removeMark } from 'ngx-editor/commands';\n\nimport { Dispatch } from './types';\n\ntype Name = 'text_color' | 'text_background_color';\n\ninterface ColorAttrs {\n  color: string;\n}\n\ninterface BackgroundColorAttrs {\n  backgroundColor: string;\n}\n\nclass TextColor {\n  name: Name;\n\n  constructor(name: Name) {\n    this.name = name;\n  }\n\n  apply(attrs: ColorAttrs | BackgroundColorAttrs): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema, selection, doc } = state;\n\n      const type: MarkType = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n\n      const { from, to, empty } = selection;\n\n      if (!empty && (from + 1 === to)) {\n        const node = doc.nodeAt(from);\n        if (node?.isAtom && !node.isText && node.isLeaf) {\n          // An atomic node (e.g. Image) is selected.\n          return false;\n        }\n      }\n\n      return applyMark(type, attrs)(state, dispatch);\n    };\n  }\n\n  isActive(state: EditorState): boolean {\n    const { schema } = state;\n    const type: MarkType = schema.marks[this.name];\n\n    if (!type) {\n      return false;\n    }\n\n    return isMarkActive(state, type);\n  }\n\n  getActiveColors(state: EditorState): string[] {\n    if (!this.isActive(state)) {\n      return [];\n    }\n\n    const { schema } = state;\n    const marks = getSelectionMarks(state);\n\n    const colors = marks\n      .filter(mark => mark.type === schema.marks[this.name])\n      .map(mark => mark.attrs.color)\n      .filter(Boolean);\n\n    return colors;\n  }\n\n  remove(): Command {\n    return (state: EditorState, dispatch?: Dispatch): boolean => {\n      const { schema } = state;\n\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n\n      return removeMark(type)(state, dispatch);\n    };\n  }\n\n  canExecute(state: EditorState): boolean {\n    const attrs = this.name === 'text_color' ? { color: '' } : { backgroundColor: '' };\n    return this.apply(attrs)(state);\n  }\n}\n\nexport default TextColor;\n","import Mark from './Mark';\nimport Blockquote from './Blockquote';\nimport ListItem from './ListItem';\nimport Heading from './Heading';\nimport TextAlign from './TextAlign';\nimport Link from './Link';\nimport Image from './Image';\nimport TextColor from './TextColor';\n\nexport const STRONG = new Mark('strong');\nexport const EM = new Mark('em');\nexport const CODE = new Mark('code');\nexport const UNDERLINE = new Mark('u');\nexport const STRIKE = new Mark('s');\nexport const BLOCKQUOTE = new Blockquote();\nexport const UL = new ListItem(true);\nexport const OL = new ListItem(false);\nexport const H1 = new Heading(1);\nexport const H2 = new Heading(2);\nexport const H3 = new Heading(3);\nexport const H4 = new Heading(4);\nexport const H5 = new Heading(5);\nexport const H6 = new Heading(6);\nexport const ALIGN_LEFT = new TextAlign('left');\nexport const ALIGN_CENTER = new TextAlign('center');\nexport const ALIGN_RIGHT = new TextAlign('right');\nexport const ALIGN_JUSTIFY = new TextAlign('justify');\nexport const LINK = new Link();\nexport const IMAGE = new Image();\nexport const TEXT_COLOR = new TextColor('text_color');\nexport const TEXT_BACKGROUND_COLOR = new TextColor('text_background_color');\n","import * as Commands from '../../commands';\n\nimport { ToggleCommand } from '../../commands/types';\n\nexport const ToggleCommands: Record<string, ToggleCommand> = {\n  bold: Commands.STRONG,\n  italic: Commands.EM,\n  code: Commands.CODE,\n  underline: Commands.UNDERLINE,\n  strike: Commands.STRIKE,\n  blockquote: Commands.BLOCKQUOTE,\n  bullet_list: Commands.UL,\n  ordered_list: Commands.OL,\n  h1: Commands.H1,\n  h2: Commands.H2,\n  h3: Commands.H3,\n  h4: Commands.H4,\n  h5: Commands.H5,\n  h6: Commands.H6,\n  align_left: Commands.ALIGN_LEFT,\n  align_center: Commands.ALIGN_CENTER,\n  align_right: Commands.ALIGN_RIGHT,\n  align_justify: Commands.ALIGN_JUSTIFY\n};\n\nexport const Link = Commands.LINK;\nexport const Image = Commands.IMAGE;\nexport const TextColor = Commands.TEXT_COLOR;\nexport const TextBackgroundColor = Commands.TEXT_BACKGROUND_COLOR;\n","import { Component, HostBinding, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport Icon from '../../../icons';\nimport { ToggleCommands } from '../MenuCommands';\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport { TBItems, ToolbarItem } from '../../../types';\n\n@Component({\n  selector: 'ngx-toggle-command',\n  templateUrl: './toggle-command.component.html',\n  styleUrls: ['./toggle-command.component.scss']\n})\n\nexport class ToggleCommandComponent implements OnInit, OnDestroy {\n  @Input() toolbarItem: ToolbarItem;\n\n  get name(): TBItems {\n    return this.toolbarItem as TBItems;\n  }\n\n  html: string;\n  editorView: EditorView;\n  private pluginUpdateSubscription: Subscription;\n\n  constructor(\n    private ngxeService: NgxEditorService,\n    private menuService: MenuService\n  ) {\n    this.editorView = this.menuService.view;\n\n    this.pluginUpdateSubscription = this.menuService.plugin.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  @HostBinding('class.NgxEditor__MenuItem--Active') isActive = false;\n  @HostBinding('class.NgxEditor--Disabled') disabled = false;\n\n  toggle(e: MouseEvent): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const { state, dispatch } = this.editorView;\n    const command = ToggleCommands[this.name];\n    command.toggle()(state, dispatch);\n  }\n\n  update = (view: EditorView) => {\n    const { state } = view;\n    const command = ToggleCommands[this.name];\n    this.isActive = command.isActive(state);\n    this.disabled = !command.canExecute(state);\n  }\n\n  getTitle(name: string): string {\n    return this.ngxeService.locals.get(name);\n  }\n\n  ngOnInit(): void {\n    this.html = Icon.get(this.name);\n  }\n\n  ngOnDestroy(): void {\n    this.pluginUpdateSubscription.unsubscribe();\n  }\n}\n","import { Component, ElementRef, HostBinding, HostListener, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport Icon from '../../../icons';\nimport { Link as LinkCommand } from '../MenuCommands';\n\n@Component({\n  selector: 'ngx-link',\n  templateUrl: './link.component.html',\n  styleUrls: ['./link.component.scss']\n})\n\nexport class LinkComponent implements OnDestroy {\n  showPopup = false;\n  isActive = false;\n  private canExecute = true;\n  private editorView: EditorView;\n  private pluginUpdateSubscription: Subscription;\n\n  form = new FormGroup({\n    href: new FormControl('', [\n      Validators.required,\n      Validators.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?')\n    ]),\n    text: new FormControl('', [Validators.required]),\n    openInNewTab: new FormControl(true)\n  });\n\n  constructor(\n    private el: ElementRef,\n    private ngxeService: NgxEditorService,\n    private menuService: MenuService\n  ) {\n    this.editorView = this.menuService.view;\n\n    this.pluginUpdateSubscription = this.menuService.plugin.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  @HostBinding('class.NgxEditor__MenuItem--Active') get valid(): boolean {\n    return this.isActive || this.showPopup;\n  }\n\n  @HostBinding('class.NgxEditor--Disabled') get disabled(): boolean {\n    return !this.canExecute;\n  }\n\n  get icon(): string {\n    return Icon.get(this.isActive ? 'unlink' : 'link');\n  }\n\n  get href(): AbstractControl {\n    return this.form.get('href');\n  }\n\n  get text(): AbstractControl {\n    return this.form.get('text');\n  }\n\n  @HostListener('document:mousedown', ['$event']) onDocumentClick(e: MouseEvent): void {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n\n  getLabel(key: string): string {\n    return this.ngxeService.locals.get(key);\n  }\n\n  private hideForm(): void {\n    this.showPopup = false;\n    this.form.reset({\n      href: '',\n      text: '',\n      openInNewTab: true\n    });\n    this.text.enable();\n  }\n\n  onMouseDown(e: MouseEvent): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const { state, dispatch } = this.editorView;\n\n    if (this.isActive) {\n      LinkCommand.remove(state, dispatch);\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n    if (this.showPopup) {\n      this.setText();\n    }\n  }\n\n  private setText = () => {\n    const { state: { selection, doc } } = this.editorView;\n    const { empty, from, to } = selection;\n    const selectedText = !empty ? doc.textBetween(from, to) : '';\n\n    if (selectedText) {\n      this.text.patchValue(selectedText);\n      this.text.disable();\n    }\n  }\n\n  private update = (view: EditorView) => {\n    const { state } = view;\n    this.isActive = LinkCommand.isActive(state, { strict: false });\n    this.canExecute = LinkCommand.canExecute(state);\n  }\n\n  insertLink(e: MouseEvent): void {\n    e.preventDefault();\n    const { text, href, openInNewTab } = this.form.getRawValue();\n    const { dispatch, state } = this.editorView;\n    const { selection } = state;\n\n    const attrs = {\n      title: href,\n      href,\n      target: openInNewTab ? '_blank' : '_self'\n    };\n\n    if (selection.empty) {\n      LinkCommand.insert(text, attrs)(state, dispatch);\n      this.editorView.focus();\n    } else {\n      LinkCommand.update(attrs)(state, dispatch);\n    }\n    this.hideForm();\n  }\n\n  ngOnDestroy(): void {\n    this.pluginUpdateSubscription.unsubscribe();\n  }\n}\n","import {\n  Component, ElementRef, HostBinding,\n  HostListener, Input, OnDestroy\n} from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport { ToggleCommands } from '../MenuCommands';\nimport { TBHeadingItems } from '../../../types';\n\n@Component({\n  selector: 'ngx-dropdown',\n  templateUrl: './dropdown.component.html',\n  styleUrls: ['./dropdown.component.scss']\n})\nexport class DropdownComponent implements OnDestroy {\n  private editorView: EditorView;\n  private pluginUpdateSubscription: Subscription;\n\n  @Input() group: string;\n  @Input() items: TBHeadingItems[];\n\n  isDropdownOpen = false;\n\n  private activeItems: TBHeadingItems[] = [];\n  disabledItems: string[] = [];\n  activeItem: string | null;\n\n  constructor(\n    private ngxeService: NgxEditorService,\n    private menuService: MenuService,\n    private el: ElementRef\n  ) {\n    this.editorView = this.menuService.view;\n\n    this.pluginUpdateSubscription = this.menuService.plugin.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  @HostBinding('class.NgxEditor__Dropdown--Selected') get isSelected(): boolean {\n    return Boolean(this.activeItem || this.isDropdownOpen);\n  }\n\n  @HostBinding('class.NgxEditor--Disabled') get isDropdownDisabled(): boolean {\n    return this.disabledItems.length === this.items.length;\n  }\n\n  @HostListener('document:mousedown', ['$event.target']) onDocumentClick(target: Node): void {\n    if (!this.el.nativeElement.contains(target) && this.isDropdownOpen) {\n      this.isDropdownOpen = false;\n    }\n  }\n\n  getName(key: string): string {\n    return this.ngxeService.locals.get(key);\n  }\n\n  toggleDropdown(e: MouseEvent): void {\n    e.preventDefault();\n    this.isDropdownOpen = !this.isDropdownOpen;\n  }\n\n  onClick(e: MouseEvent, item: TBHeadingItems): void {\n    e.preventDefault();\n\n    // consider only left click\n    if (e.button !== 0) {\n      return;\n    }\n\n    const command = ToggleCommands[item];\n    const { state, dispatch } = this.editorView;\n    command.toggle()(state, dispatch);\n    this.isDropdownOpen = false;\n  }\n\n  private update = (view: EditorView) => {\n    const { state } = view;\n    this.activeItems = [];\n    this.disabledItems = [];\n\n    this.items.forEach((item: TBHeadingItems) => {\n      const command = ToggleCommands[item];\n      const isActive = command.isActive(state);\n\n      if (isActive) {\n        this.activeItems.push(item);\n      }\n\n      if (!command.canExecute(state)) {\n        this.disabledItems.push(item);\n      }\n    });\n\n    if (this.activeItems.length === 1) {\n      this.activeItem = this.activeItems[0];\n    } else {\n      this.activeItem = null;\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.pluginUpdateSubscription.unsubscribe();\n  }\n}\n","import { Component, ElementRef, HostBinding, HostListener, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NodeSelection } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport Icon from '../../../icons';\nimport { Image as ImageCommand } from '../MenuCommands';\n\n@Component({\n  selector: 'ngx-image',\n  templateUrl: './image.component.html',\n  styleUrls: ['./image.component.scss']\n})\nexport class ImageComponent implements OnDestroy {\n  showPopup = false;\n  isActive = false;\n  private pluginUpdateSubscription: Subscription;\n\n  form = new FormGroup({\n    src: new FormControl('', [\n      Validators.required,\n      Validators.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?')\n    ]),\n    alt: new FormControl(''),\n    title: new FormControl('')\n  });\n\n  private editorView: EditorView;\n\n  constructor(\n    private el: ElementRef,\n    private ngxeService: NgxEditorService,\n    private menuService: MenuService\n  ) {\n    this.editorView = this.menuService.view;\n\n    this.pluginUpdateSubscription = this.menuService.plugin.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  @HostBinding('class.NgxEditor__MenuItem--Active') get valid(): boolean {\n    return this.isActive || this.showPopup;\n  }\n\n  get icon(): string {\n    return Icon.get('image');\n  }\n\n  get src(): AbstractControl {\n    return this.form.get('src');\n  }\n\n  @HostListener('document:mousedown', ['$event']) onDocumentClick(e: MouseEvent): void {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n\n  getLabel(key: string): string {\n    return this.ngxeService.locals.get(key);\n  }\n\n  private hideForm(): void {\n    this.showPopup = false;\n    this.form.reset({\n      src: '',\n      alt: '',\n      title: ''\n    });\n  }\n\n  onMouseDown(e: MouseEvent): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n\n    if (this.showPopup) {\n      this.fillForm();\n    }\n  }\n\n  private fillForm(): void {\n    const { state } = this.editorView;\n    const { selection } = state;\n    if (selection instanceof NodeSelection && this.isActive) {\n      const { src, alt = '', title = '' } = selection.node.attrs;\n\n      this.form.setValue({\n        src,\n        alt,\n        title\n      });\n    }\n  }\n\n  private update = (view: EditorView) => {\n    const { state } = view;\n    this.isActive = ImageCommand.isActive(state);\n  }\n\n  insertLink(e: MouseEvent): void {\n    e.preventDefault();\n    const { src, alt, title } = this.form.getRawValue();\n    const { dispatch, state } = this.editorView;\n\n    const attrs = {\n      alt,\n      title\n    };\n\n    ImageCommand.insert(src, attrs)(state, dispatch);\n    this.editorView.focus();\n    this.hideForm();\n  }\n\n  ngOnDestroy(): void {\n    this.pluginUpdateSubscription.unsubscribe();\n  }\n}\n","import {\n  Component, ElementRef, HostBinding,\n  HostListener, OnDestroy, Input\n} from '@angular/core';\nimport { EditorView } from 'prosemirror-view';\nimport { Subscription } from 'rxjs';\n\nimport Icon from '../../../icons';\nimport { NgxEditorService } from '../../../editor.service';\nimport { MenuService } from '../menu.service';\nimport { TextColor, TextBackgroundColor } from '../MenuCommands';\n\ntype Command = typeof TextColor | typeof TextBackgroundColor;\n\n@Component({\n  selector: 'ngx-color-picker',\n  templateUrl: './color-picker.component.html',\n  styleUrls: ['./color-picker.component.scss']\n})\nexport class ColorPickerComponent implements OnDestroy {\n  @Input() presets: string[][];\n  @Input() type: string;\n\n  constructor(\n    private el: ElementRef,\n    private menuService: MenuService,\n    private ngxeService: NgxEditorService\n  ) {\n    this.editorView = this.menuService.view;\n\n    this.pluginUpdateSubscription = this.menuService.plugin.update.subscribe((view: EditorView) => {\n      this.update(view);\n    });\n  }\n\n  @HostBinding('class.NgxEditor__MenuItem--Active') get valid(): boolean {\n    return this.isActive || this.showPopup;\n  }\n\n  @HostBinding('class.NgxEditor--Disabled') get disabled(): boolean {\n    return !this.canExecute;\n  }\n\n  get title(): string {\n    return this.getLabel(this.type === 'text_color' ? 'text_color' : 'background_color');\n  }\n\n  get icon(): string {\n    return Icon.get(this.type === 'text_color' ? 'text_color' : 'color_fill');\n  }\n\n  private get command(): Command {\n    return this.type === 'text_color' ? TextColor : TextBackgroundColor;\n  }\n\n  private pluginUpdateSubscription: Subscription;\n  private editorView: EditorView;\n  showPopup = false;\n  isActive = false;\n  activeColors: string[] = [];\n  private canExecute = true;\n\n  getContrastYIQ(hexcolor: string): string {\n    hexcolor = hexcolor.replace('#', '');\n    const r = parseInt(hexcolor.substr(0, 2), 16);\n    const g = parseInt(hexcolor.substr(2, 2), 16);\n    const b = parseInt(hexcolor.substr(4, 2), 16);\n    const yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n    return (yiq >= 128) ? 'black' : 'white';\n  }\n\n  @HostListener('document:mousedown', ['$event']) onDocumentClick(e: MouseEvent): void {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hidePopup();\n    }\n  }\n\n  private hidePopup(): void {\n    this.showPopup = false;\n  }\n\n  togglePopup(e: MouseEvent): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    this.showPopup = !this.showPopup;\n  }\n\n  remove(e: MouseEvent): void {\n    e.preventDefault();\n    const { state, dispatch } = this.editorView;\n\n    this.command.remove()(state, dispatch);\n    this.hidePopup();\n  }\n\n  onColorSelect(e: MouseEvent, color: string): void {\n    e.preventDefault();\n\n    if (e.button !== 0) {\n      return;\n    }\n\n    const { state, dispatch } = this.editorView;\n\n    if (this.type === 'text_color') {\n      const attrs = { color };\n      this.command.apply(attrs)(state, dispatch);\n    } else {\n      const attrs = { backgroundColor: color };\n      this.command.apply(attrs)(state, dispatch);\n    }\n\n    if (!this.editorView.hasFocus()) {\n      this.editorView.focus();\n    }\n\n    this.hidePopup();\n  }\n\n  private update = (view: EditorView) => {\n    const { state } = view;\n    this.canExecute = this.command.canExecute(state);\n    this.isActive = this.command.isActive(state);\n    this.activeColors = [];\n\n    if (this.isActive) {\n      this.activeColors = this.command.getActiveColors(state);\n    }\n  }\n\n  getLabel(key: string): string {\n    return this.ngxeService.locals.get(key);\n  }\n\n  ngOnDestroy(): void {\n    this.pluginUpdateSubscription.unsubscribe();\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'sanitizeHtml'\n})\n\nexport class SanitizeHtmlPipe implements PipeTransform {\n\n  constructor(private sanitizer: DomSanitizer) { }\n\n  transform(value: string): SafeHtml {\n    return this.sanitizer.bypassSecurityTrustHtml(value);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { MenuService } from './menu.service';\n\nimport { MenuComponent } from './menu.component';\nimport { ToggleCommandComponent } from './toggle-command/toggle-command.component';\nimport { LinkComponent } from './link/link.component';\nimport { DropdownComponent } from './dropdown/dropdown.component';\nimport { ImageComponent } from './image/image.component';\nimport { ColorPickerComponent } from './color-picker/color-picker.component';\n\nimport { SanitizeHtmlPipe } from '../../pipes/sanitize/sanitize-html.pipe';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule\n  ],\n  declarations: [\n    // pipes\n    SanitizeHtmlPipe,\n\n    // components\n    MenuComponent,\n    ToggleCommandComponent,\n    LinkComponent,\n    DropdownComponent,\n    ImageComponent,\n    ColorPickerComponent,\n  ],\n  providers: [\n    MenuService,\n  ],\n  exports: [\n    MenuComponent\n  ],\n})\n\nexport class MenuModule { }\n","import {\n  Component, ElementRef, Input, OnDestroy,\n  OnInit, Renderer2\n} from '@angular/core';\nimport { NodeSelection } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Mark } from 'prosemirror-model';\nimport { Subscription } from 'rxjs';\n\nimport { calculateBubblePos, getSelectionMarks, isLinkActive } from 'ngx-editor/helpers';\nimport { removeLink } from 'ngx-editor/commands';\n\nimport Editor from '../../Editor';\n\n@Component({\n  selector: 'ngx-bubble',\n  templateUrl: './bubble.component.html',\n  styleUrls: ['./bubble.component.scss']\n})\nexport class BubbleComponent implements OnInit, OnDestroy {\n  @Input() editor: Editor;\n\n  private view: EditorView;\n  private updateSubscription: Subscription;\n  activeLinkItem: Mark;\n\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2\n  ) { }\n\n  private setDomPosition(): void {\n    // Otherwise, reposition it and update its content\n    this.showBubble();\n\n    const { bottom, left } = calculateBubblePos(this.view, this.el.nativeElement);\n\n    this.renderer.setStyle(this.el.nativeElement, 'left', `${left}px`);\n    this.renderer.setStyle(this.el.nativeElement, 'bottom', `${bottom}px`);\n  }\n\n  private showBubble(): void {\n    this.renderer.setStyle(this.el.nativeElement, 'display', 'flex');\n  }\n\n  private hideBubble(): void {\n    this.renderer.setStyle(this.el.nativeElement, 'display', 'none');\n  }\n\n  removeLink(): void {\n    const { state, dispatch } = this.view;\n    removeLink()(state, dispatch);\n    this.view.focus();\n  }\n\n  private update(): void {\n    const { state } = this.view;\n    const { schema, selection } = state;\n\n    if (!schema.marks.link) {\n      return;\n    }\n\n    if (selection instanceof NodeSelection) {\n      if (selection.node.type.name === 'image') {\n        return;\n      }\n    }\n\n    const hasFocus = this.view.hasFocus();\n    const isActive = isLinkActive(state);\n    const linkMarks: Mark[] = getSelectionMarks(state).filter(mark => mark.type === schema.marks.link);\n\n    // hide for selection and show only for clicks\n    if (!hasFocus || !isActive) {\n      this.hideBubble();\n      return;\n    }\n\n    const [linkItem] = linkMarks;\n    this.activeLinkItem = linkItem;\n\n    // update dom position\n    this.setDomPosition();\n  }\n\n  ngOnInit(): void {\n    this.view = this.editor.view;\n\n    this.updateSubscription = this.editor.onUpdate.subscribe(() => {\n      this.update();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.updateSubscription.unsubscribe();\n  }\n}\n","import { NgModule, ModuleWithProviders, InjectionToken } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgxEditorConfig } from './types';\n\nimport { NgxEditorComponent } from './editor.component';\nimport { NgxEditorService, NgxEditorServiceConfig, provideMyServiceOptions } from './editor.service';\nimport { MenuModule } from './modules/menu/menu.module';\n\nimport { BubbleComponent } from './components/bubble/bubble.component';\nimport { MenuComponent } from './modules/menu/menu.component';\n\nconst NGX_EDITOR_CONFIG_TOKEN = new InjectionToken<NgxEditorConfig>('NgxEditorConfig');\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MenuModule,\n  ],\n  providers: [],\n  declarations: [\n    NgxEditorComponent,\n    BubbleComponent,\n  ],\n  exports: [\n    NgxEditorComponent,\n    MenuComponent\n  ]\n})\n\nexport class NgxEditorModule {\n  static forRoot(config: NgxEditorConfig): ModuleWithProviders<NgxEditorModule> {\n\n    return {\n      ngModule: NgxEditorModule,\n      providers: [\n        {\n          provide: NGX_EDITOR_CONFIG_TOKEN,\n          useValue: config\n        },\n        {\n          provide: NgxEditorServiceConfig,\n          useFactory: provideMyServiceOptions,\n          deps: [NGX_EDITOR_CONFIG_TOKEN]\n        }\n      ]\n    };\n  }\n\n  static forChild(config: NgxEditorConfig): ModuleWithProviders<NgxEditorModule> {\n    return {\n      ngModule: NgxEditorModule,\n      providers: [\n        {\n          provide: NGX_EDITOR_CONFIG_TOKEN,\n          useValue: config\n        },\n        {\n          provide: NgxEditorServiceConfig,\n          useFactory: provideMyServiceOptions,\n          deps: [NGX_EDITOR_CONFIG_TOKEN]\n        },\n        NgxEditorService,\n      ]\n    };\n  }\n}\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\nimport { Schema, Node as ProsemirrorNode } from 'prosemirror-model';\n\nimport { parseContent } from './parsers';\nimport defaultSchema from './schema';\n\ntype ValidationErrors = Record<string, any>;\n\nconst isEmptyInputValue = (value: any): boolean => {\n  // we don't check for string here so it also works with arrays\n  return value === null || value.length === 0;\n};\n\nconst hasValidLength = (value: any): boolean => {\n  // non-strict comparison is intentional, to check for both `null` and `undefined` values\n  return value != null && typeof value.length === 'number';\n};\n\nconst isDocEmpty = (doc: ProsemirrorNode | null): boolean => {\n  if (!doc) {\n    return true;\n  }\n\n  const { childCount, firstChild } = doc;\n  return Boolean(childCount === 1 && firstChild?.isTextblock && firstChild.content.size === 0);\n};\n\n// @dynamic\nexport class Validators {\n\n  static required(userSchema?: Schema): ValidatorFn {\n    return (control: AbstractControl): ValidationErrors | null => {\n\n      const schema = userSchema || defaultSchema;\n      const doc = parseContent(control.value, schema);\n\n      const isEmpty = isDocEmpty(doc);\n\n      if (!isEmpty) {\n        return null;\n      }\n\n      return {\n        required: true\n      };\n    };\n  }\n\n  static maxLength(maxLength: number, userSchema?: Schema): ValidatorFn {\n    return (control: AbstractControl): ValidationErrors | null => {\n      const schema = userSchema || defaultSchema;\n      const doc = parseContent(control.value, schema);\n\n      const value = doc.textContent;\n\n      if (hasValidLength(value) && value.length > maxLength) {\n        return {\n          maxlength: {\n            requiredLength: maxLength,\n            actualLength: value.length\n          }\n        };\n      }\n\n      return null;\n    };\n  }\n\n  static minLength(minLength: number, userSchema?: Schema): ValidatorFn {\n    return (control: AbstractControl): ValidationErrors | null => {\n\n      const schema = userSchema || defaultSchema;\n      const doc = parseContent(control.value, schema);\n\n      const value = doc.textContent;\n\n      if (isEmptyInputValue(value) || !hasValidLength(value)) {\n        // don't validate empty values to allow optional controls\n        // don't validate values without `length` property\n        return null;\n      }\n\n      if (value.length < minLength) {\n        return {\n          minlength: {\n            requiredLength: minLength, actualLength: value.length\n          }\n        };\n      }\n\n      return null;\n    };\n  }\n}\n","import { EditorState, Transaction } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport {\n  chainCommands, createParagraphNear, liftEmptyBlock,\n  newlineInCode, splitBlock\n} from 'prosemirror-commands';\n\nimport MarkCommand from './commands/Mark';\nimport ListCommand from './commands/ListItem';\nimport LinkCommand, { LinkAttrs } from './commands/Link';\nimport HeadingCommand, { HeadingLevels } from './commands/Heading';\nimport ImageCommand, { ImageAttrs } from './commands/Image';\nimport TextColorCommand from './commands/TextColor';\nimport TextAlignCommand, { Align } from './commands/TextAlign';\n\nconst execMark = (name: string, toggle = false) => {\n  return (state: EditorState, dispatch: (tr: Transaction) => void) => {\n    const command = new MarkCommand(name);\n\n    if (!toggle) {\n      return command.apply()(state, dispatch);\n    }\n\n    return command.toggle()(state, dispatch);\n  };\n};\n\nclass EditorCommands {\n  private view: EditorView;\n  private state: EditorState;\n  private tr: Transaction;\n\n  constructor(view: EditorView) {\n    if (!view) {\n      throw Error('NgxEditor: Required view to initialize commands.');\n    }\n\n    this.view = view;\n    this.state = view.state;\n    this.tr = this.view.state.tr;\n  }\n\n  private applyTrx = (tr?: Transaction) => {\n    this.state = this.state.apply(tr ?? this.tr);\n    this.tr = this.state.tr;\n    this.tr.setMeta('APPLIED_TRX', true);\n  }\n\n  private dispatch = (tr: Transaction): void => {\n    this.applyTrx(tr);\n  }\n\n  exec(): boolean {\n    // No changes applied\n    if (!this.tr.getMeta('APPLIED_TRX')) {\n      return false;\n    }\n\n    const forceEmit = !this.view.state.doc.eq(this.state.doc);\n    this.view.updateState(this.state);\n\n    const tr = this.tr\n      .setMeta('FORCE_EMIT', forceEmit);\n\n    this.view.dispatch(tr);\n    return true;\n  }\n\n  focus(): this {\n    this.view.focus();\n    return this;\n  }\n\n  scrollIntoView(): this {\n    this.tr.scrollIntoView();\n    this.applyTrx();\n    return this;\n  }\n\n  insertText(text: string): this {\n    this.tr.insertText(text);\n    this.applyTrx();\n    return this;\n  }\n\n  insertNewLine(): this {\n    const newLineCommands = [newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock];\n    chainCommands(...newLineCommands)(this.state, this.dispatch);\n    return this;\n  }\n\n  applyMark(name: string): this {\n    execMark(name, false)(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleMark(name: string): this {\n    execMark(name, true)(this.state, this.dispatch);\n    return this;\n  }\n\n  bold(): this {\n    execMark('strong')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleBold(): this {\n    execMark('strong', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  italics(): this {\n    execMark('em')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleItalics(): this {\n    execMark('em', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  underline(): this {\n    execMark('u')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleUnderline(): this {\n    execMark('u', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  strike(): this {\n    execMark('s')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleStrike(): this {\n    execMark('s', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  code(): this {\n    execMark('code')(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleCode(): this {\n    execMark('code', true)(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleOrderedList(): this {\n    const command = new ListCommand(false);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleBulletList(): this {\n    const command = new ListCommand(true);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  toggleHeading(level: HeadingLevels): this {\n    const command = new HeadingCommand(level);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n\n  insertLink(text: string, attrs: LinkAttrs): this {\n    const command = new LinkCommand();\n    command.insert(text, attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  updateLink(attrs: LinkAttrs): this {\n    const command = new LinkCommand();\n    command.update(attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  insertImage(src: string, attrs: ImageAttrs = {}): this {\n    const command = new ImageCommand();\n    command.insert(src, attrs)(this.state, this.dispatch);\n    return this;\n  }\n\n  textColor(color: string): this {\n    const command = new TextColorCommand('text_color');\n    command.apply({ color })(this.state, this.dispatch);\n    return this;\n  }\n\n  backgroundColor(color: string): this {\n    const command = new TextColorCommand('text_background_color');\n    command.apply({ backgroundColor: color })(this.state, this.dispatch);\n    return this;\n  }\n\n  removeTextColor(): this {\n    const command = new TextColorCommand('text_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n\n  removeBackgroundColor(): this {\n    const command = new TextColorCommand('text_background_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n\n  align(p: Align): this {\n    const command = new TextAlignCommand(p);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n}\n\nexport default EditorCommands;\n","import { NodeType, Schema } from 'prosemirror-model';\nimport { Plugin } from 'prosemirror-state';\nimport { keymap } from 'prosemirror-keymap';\nimport { toggleMark, baseKeymap } from 'prosemirror-commands';\nimport { splitListItem, liftListItem, sinkListItem } from 'prosemirror-schema-list';\nimport { history, undo, redo } from 'prosemirror-history';\nimport {\n  inputRules, wrappingInputRule, textblockTypeInputRule,\n  smartQuotes, emDash, ellipsis, InputRule\n} from 'prosemirror-inputrules';\n\ninterface Options {\n  history: boolean;\n  keyboardShortcuts: boolean;\n  inputRules: boolean;\n}\n\ninterface ShortcutOptions {\n  history: boolean;\n}\n\nconst isMacOs = /Mac/.test(navigator.platform);\n\n// Input rules ref: https://github.com/ProseMirror/prosemirror-example-setup/\n\n// : (NodeType) → InputRule\n// Given a blockquote node type, returns an input rule that turns `\"> \"`\n// at the start of a textblock into a blockquote.\nconst blockQuoteRule = (nodeType: NodeType): InputRule => {\n  return wrappingInputRule(/^\\s*>\\s$/, nodeType);\n};\n\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a number\n// followed by a dot at the start of a textblock into an ordered list.\nconst orderedListRule = (nodeType: NodeType): InputRule => {\n  return wrappingInputRule(\n    /^(\\d+)\\.\\s$/,\n    nodeType,\n    match => ({ order: +match[1] }),\n    (match, node) => node.childCount + node.attrs.order === +match[1]\n  );\n};\n\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a bullet\n// (dash, plush, or asterisk) at the start of a textblock into a\n// bullet list.\nconst bulletListRule = (nodeType: NodeType): InputRule => {\n  return wrappingInputRule(/^\\s*([-+*])\\s$/, nodeType);\n};\n\n// : (NodeType) → InputRule\n// Given a code block node type, returns an input rule that turns a\n// textblock starting with three backticks into a code block.\nconst codeBlockRule = (nodeType: NodeType): InputRule => {\n  return textblockTypeInputRule(/^```$/, nodeType);\n};\n\n// : (NodeType, number) → InputRule\n// Given a node type and a maximum level, creates an input rule that\n// turns up to that number of `#` characters followed by a space at\n// the start of a textblock into a heading whose level corresponds to\n// the number of `#` signs.\nconst headingRule = (nodeType: NodeType, maxLevel: number): InputRule => {\n  return textblockTypeInputRule(\n    new RegExp('^(#{1,' + maxLevel + '})\\\\s$'),\n    nodeType,\n    (match) => ({ level: match[1].length })\n  );\n};\n\n// : (Schema) → Plugin\n// A set of input rules for creating the basic block quotes, lists,\n// code blocks, and heading.\nconst buildInputRules = (schema: Schema): Plugin => {\n  const rules = smartQuotes.concat(ellipsis, emDash);\n\n  rules.push(blockQuoteRule(schema.nodes.blockquote));\n  rules.push(orderedListRule(schema.nodes.ordered_list));\n  rules.push(bulletListRule(schema.nodes.bullet_list));\n  rules.push(codeBlockRule(schema.nodes.code_block));\n  rules.push(headingRule(schema.nodes.heading, 6));\n\n  return inputRules({ rules });\n};\n\nconst getKeyboardShortcuts = (schema: Schema, options: ShortcutOptions) => {\n  const historyKeyMap: Record<string, any> = {};\n\n  historyKeyMap['Mod-z'] = undo;\n  if (isMacOs) {\n    historyKeyMap['Shift-Mod-z'] = redo;\n  } else {\n    historyKeyMap['Mod-y'] = redo;\n  }\n\n  const plugins = [\n    keymap({\n      'Mod-b': toggleMark(schema.marks.strong),\n      'Mod-i': toggleMark(schema.marks.em),\n      'Mod-`': toggleMark(schema.marks.code),\n    }),\n    keymap({\n      Enter: splitListItem(schema.nodes.list_item),\n      'Mod-[': liftListItem(schema.nodes.list_item),\n      'Mod-]': sinkListItem(schema.nodes.list_item),\n      Tab: sinkListItem(schema.nodes.list_item)\n    }),\n    keymap(baseKeymap)\n  ];\n\n  if (options.history) {\n    plugins.push(keymap(historyKeyMap));\n  }\n\n  return plugins;\n};\n\nconst getDefaultPlugins = (schema: Schema, options: Options) => {\n  const plugins: Plugin[] = [];\n\n  if (options.keyboardShortcuts) {\n    plugins.push(...getKeyboardShortcuts(schema, { history: options.history }));\n  }\n\n  if (options.history) {\n    plugins.push(history());\n  }\n\n  if (options.inputRules) {\n    plugins.push(buildInputRules(schema));\n  }\n\n  return plugins;\n};\n\nexport default getDefaultPlugins;\n","import { Schema } from 'prosemirror-model';\nimport { EditorState, Plugin, Transaction } from 'prosemirror-state';\nimport { EditorProps, EditorView } from 'prosemirror-view';\nimport { Subject } from 'rxjs';\n\nimport {\n  editable as editablePlugin,\n  placeholder as placeholderPlugin\n} from 'ngx-editor/plugins';\nimport { isNil } from 'ngx-editor/utils';\n\nimport EditorCommands from './EditorCommands';\nimport defautlSchema from './schema';\nimport { parseContent } from './parsers';\nimport getDefaultPlugins from './defaultPlugins';\n\ntype Content = string | Record<string, any> | null;\ntype JSONDoc = Record<string, null>;\n\ninterface Options {\n  content?: Content;\n  enabled?: boolean;\n  placeholder?: string;\n  history?: boolean;\n  keyboardShortcuts?: boolean;\n  inputRules?: boolean;\n  schema?: Schema;\n  plugins?: Plugin[];\n  nodeViews?: EditorProps['nodeViews'];\n}\n\nconst DEFAULT_OPTIONS: Options = {\n  content: null,\n  enabled: true,\n  history: true,\n  keyboardShortcuts: true,\n  inputRules: true,\n  schema: defautlSchema,\n  plugins: [],\n  nodeViews: {}\n};\n\nclass Editor {\n  view: EditorView;\n  options: Options;\n  el: DocumentFragment;\n\n  onContentChange = new Subject<JSONDoc>();\n  onFocus = new Subject<void>();\n  onBlur = new Subject<void>();\n  onUpdate = new Subject();\n\n  constructor(options: Options = DEFAULT_OPTIONS) {\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.createEditor();\n  }\n\n  get schema(): Schema {\n    return this.options.schema || defautlSchema;\n  }\n\n  get commands(): EditorCommands {\n    return new EditorCommands(this.view);\n  }\n\n  setContent(content: Content): void {\n    if (isNil(content)) {\n      return;\n    }\n\n    const { state } = this.view;\n    const { tr, doc } = state;\n\n    const newDoc = parseContent(content, this.schema);\n\n    tr.replaceWith(0, state.doc.content.size, newDoc);\n\n    // don't emit if both content is same\n    if (doc.eq(tr.doc)) {\n      return;\n    }\n\n    if (!tr.docChanged) {\n      return;\n    }\n\n    this.view.dispatch(tr);\n  }\n\n  private handleTransactions(tr: Transaction): void {\n    const state = this.view.state.apply(tr);\n    this.view.updateState(state);\n\n    this.onUpdate.next();\n\n    if (!tr.docChanged && !tr.getMeta('FORCE_EMIT')) {\n      return;\n    }\n\n    const json = state.doc.toJSON();\n    this.onContentChange.next(json);\n  }\n\n  private createEditor(): void {\n    const { options } = this;\n    const { content = null, nodeViews, enabled } = options;\n    const { history = true, keyboardShortcuts = true, inputRules = true } = options;\n    const schema = this.schema;\n\n    const editable = enabled ?? true;\n    const placeholder = options.placeholder ?? '';\n\n    const doc = parseContent(content, schema);\n    this.el = document.createDocumentFragment();\n\n    const plugins: Plugin[] = [\n      editablePlugin(),\n      placeholderPlugin(placeholder),\n      ...(options.plugins ?? [])\n    ];\n\n    const defaultPlugins = getDefaultPlugins(schema, {\n      history,\n      keyboardShortcuts,\n      inputRules\n    });\n\n    plugins.push(...defaultPlugins);\n\n    this.view = new EditorView(this.el, {\n      editable: () => editable,\n      state: EditorState.create({\n        doc,\n        schema,\n        plugins,\n      }),\n      nodeViews,\n      dispatchTransaction: this.handleTransactions.bind(this),\n      handleDOMEvents: {\n        focus: () => {\n          this.onFocus.next();\n          return false;\n        },\n        blur: () => {\n          this.onBlur.next();\n          return false;\n        }\n      },\n      attributes: {\n        class: 'NgxEditor__Content'\n      },\n    });\n  }\n\n  registerPlugin(plugin: Plugin): void {\n    const { state } = this.view;\n    const plugins = [...state.plugins, plugin];\n\n    const newState = state.reconfigure({ plugins });\n    this.view.updateState(newState);\n  }\n\n  enable(): void {\n    const { dispatch, state: { tr } } = this.view;\n    dispatch(tr.setMeta('UPDATE_EDITABLE', true));\n  }\n\n  disable(): void {\n    const { dispatch, state: { tr } } = this.view;\n    dispatch(tr.setMeta('UPDATE_EDITABLE', false));\n  }\n\n  setPlaceholder(placeholder: string): void {\n    const { dispatch, state: { tr } } = this.view;\n    dispatch(tr.setMeta('UPDATE_PLACEHOLDER', placeholder));\n  }\n\n  destroy(): void {\n    this.view.destroy();\n  }\n}\n\nexport default Editor;\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {BubbleComponent as ɵl} from './lib/components/bubble/bubble.component';\nexport {NgxEditorService as ɵf,NgxEditorServiceConfig as ɵe,provideMyServiceOptions as ɵg} from './lib/editor.service';\nexport {ColorPickerComponent as ɵk} from './lib/modules/menu/color-picker/color-picker.component';\nexport {DropdownComponent as ɵi} from './lib/modules/menu/dropdown/dropdown.component';\nexport {ImageComponent as ɵj} from './lib/modules/menu/image/image.component';\nexport {LinkComponent as ɵh} from './lib/modules/menu/link/link.component';\nexport {MenuModule as ɵb} from './lib/modules/menu/menu.module';\nexport {MenuService as ɵa} from './lib/modules/menu/menu.service';\nexport {ToggleCommandComponent as ɵd} from './lib/modules/menu/toggle-command/toggle-command.component';\nexport {SanitizeHtmlPipe as ɵc} from './lib/pipes/sanitize/sanitize-html.pipe';"]}