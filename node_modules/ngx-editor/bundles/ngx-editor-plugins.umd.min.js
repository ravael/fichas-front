!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("prosemirror-state"),require("prosemirror-view")):"function"==typeof define&&define.amd?define("ngx-editor/plugins",["exports","prosemirror-state","prosemirror-view"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["ngx-editor"]=e["ngx-editor"]||{},e["ngx-editor"].plugins={}),e.prosemirrorState,e.prosemirrorView)}(this,(function(e,t,n){"use strict";var i=function(e){return new t.Plugin({key:new t.PluginKey("placeholder"),state:{init:function(){return null!=e?e:""},apply:function(e,t){var n;return null!==(n=e.getMeta("UPDATE_PLACEHOLDER"))&&void 0!==n?n:t}},props:{decorations:function(e){var t,i=e.doc,r=this.getState(e);if(!r)return n.DecorationSet.empty;if(1===i.childCount&&(null===(t=null==i?void 0:i.firstChild)||void 0===t?void 0:t.isTextblock)&&0===i.firstChild.content.size){var o=document.createElement("span");return o.classList.add("NgxEditor__Placeholder"),o.textContent=r,n.DecorationSet.create(i,[n.Decoration.widget(1,o)])}return n.DecorationSet.empty}}})},r=function(e){return void 0===e&&(e=!0),new t.Plugin({key:new t.PluginKey("editable"),state:{init:function(){return e},apply:function(e,t){var n;return null!==(n=e.getMeta("UPDATE_EDITABLE"))&&void 0!==n?n:t}},props:{editable:function(e){return this.getState(e)},attributes:function(e){return this.getState(e)?null:{class:"NgxEditor__Content--Disabled"}}}})},o="NgxEditor__Resizer--Active",s="NgxEditor__ResizeHandle",d=function(e){var t=document.createElement("span");return t.className="NgxEditor__ResizeHandle--"+e,t},a=function(){function e(e,n,i){var r,o,a=document.createElement("span");a.className="NgxEditor__ImageWrapper",a.style.width=e.attrs.width;var l=document.createElement("span");l.className=s;var u=document.createElement("img");u.setAttribute("src",e.attrs.src),u.setAttribute("alt",null!==(r=e.attrs.alt)&&void 0!==r?r:""),u.setAttribute("title",null!==(o=e.attrs.title)&&void 0!==o?o:""),u.style.width="100%",u.style.height="100%";var c=d("BR"),p=d("TL"),m=d("TR"),v=d("BL"),f=function(r){r.preventDefault();var o=n.state,s=n.dispatch,d=o.tr,l=r.pageX,c=u.clientWidth,p=window.getComputedStyle(n.dom).width,m=parseInt(p,10),v=function(e){var t=e.pageX,n=c+(t-l);n>m||n<20||(a.style.width=n+"px")},f=function(n){n.preventDefault(),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",f);var r=d.setNodeMarkup(i(),void 0,{src:e.attrs.src,width:a.style.width}),o=r.doc.resolve(i()),l=new t.NodeSelection(o);r.setSelection(l),s(r)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",f)};c.addEventListener("mousedown",f,{once:!0}),p.addEventListener("mousedown",f,{once:!0}),m.addEventListener("mousedown",f,{once:!0}),v.addEventListener("mousedown",f,{once:!0}),l.appendChild(c),l.appendChild(p),l.appendChild(m),l.appendChild(v),a.appendChild(l),a.appendChild(u),this.dom=a,this.img=u,this.handle=l}return e.prototype.selectNode=function(){this.dom.classList.add(o),this.handle.style.display="block"},e.prototype.deselectNode=function(){this.dom.classList.remove(o),this.handle.style.display="none"},e}(),l={resize:!0},u=function(e){void 0===e&&(e=l);var n=Object.assign(Object.assign({},l),e);return new t.Plugin({key:new t.PluginKey("link"),props:{nodeViews:{image:function(e,t,i){return n.resize?new a(e,t,i):null}}}})};e.editable=r,e.image=u,e.placeholder=i,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-editor-plugins.umd.min.js.map